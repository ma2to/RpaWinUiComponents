<?xml version="1.0" encoding="utf-8"?>
<!-- build/RpaWinUiComponents.targets - JednoduchÃ½ bez kopÃ­rovania -->
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <RpaWinUiComponentsVersion Condition="'$(RpaWinUiComponentsVersion)' == ''">1.0.4</RpaWinUiComponentsVersion>
    <UseWinUI Condition="'$(UseWinUI)' == ''">true</UseWinUI>
  </PropertyGroup>

  <!-- âœ… Ensure WinUI 3 dependencies -->
  <ItemGroup Condition="'$(UseWinUI)' == 'true'">
    <PackageReference Include="Microsoft.WindowsAppSDK" Version="1.7.250606001" Condition="'@(PackageReference->WithMetadataValue('Identity', 'Microsoft.WindowsAppSDK'))' == ''" />
    <PackageReference Include="Microsoft.Extensions.DependencyInjection" Version="9.0.6" Condition="'@(PackageReference->WithMetadataValue('Identity', 'Microsoft.Extensions.DependencyInjection'))' == ''" />
    <PackageReference Include="Microsoft.Extensions.Hosting" Version="9.0.6" Condition="'@(PackageReference->WithMetadataValue('Identity', 'Microsoft.Extensions.Hosting'))' == ''" />
  </ItemGroup>

  <!-- âœ… Add main assembly reference -->
  <Target Name="AddRpaWinUiComponentsReference" BeforeTargets="ResolveAssemblyReferences">
    <PropertyGroup>
      <_RpaWinUiComponentsPath>$(MSBuildThisFileDirectory)../lib/$(TargetFramework)/RpaWinUiComponents.dll</_RpaWinUiComponentsPath>
    </PropertyGroup>

    <ItemGroup Condition="Exists('$(_RpaWinUiComponentsPath)')">
      <Reference Include="$(_RpaWinUiComponentsPath)">
        <Private>false</Private>
      </Reference>
    </ItemGroup>

    <Message Text="âœ… RpaWinUiComponents: Added reference to $(_RpaWinUiComponentsPath)" Importance="normal" Condition="Exists('$(_RpaWinUiComponentsPath)')" />
    <Warning Text="âŒ RpaWinUiComponents: Main DLL not found at $(_RpaWinUiComponentsPath)" Condition="!Exists('$(_RpaWinUiComponentsPath)')" />
  </Target>

  <!-- âœ… Info message -->
  <Target Name="RpaWinUiComponentsInfo" BeforeTargets="Build">
    <Message Text="ðŸ“¦ RpaWinUiComponents v$(RpaWinUiComponentsVersion) loaded for $(TargetFramework)" Importance="normal" />
  </Target>

</Project>